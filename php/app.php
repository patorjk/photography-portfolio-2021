<?php
    /*
        What's this?
        Just a php file that can be used to replace constants for use in updating meta tags
    */

    $photos = json_decode('[{"name":"patterson-park-pagoda-in-springtime","des":"Built in 1891 as a people\'s lookout tower, this pagoda is located in Baltimore, Maryland of all places. It\'s one of the city\'s most popular landmarks and a highlight of one of its nicest parks.","title":"Patterson Park Pagoda","photo":"/static/media/1200.af629c92f3e518d7ca41.jpg"},{"name":"baltimore-skyline-light-toggle","des":"A view of Baltimore\'s skyline from 2018. I superimposed two images to create the lights on/off effect. I found it kind of fun, though maybe I\'m just easily amused. I figured I\'d put it up here so others could play around with it too.","title":"Baltimore Skyline Light Toggle (power the city on and off)","photo":"/static/media/1200.74af36abdd5f569379f4.jpg"},{"name":"domino-2021-sunrise-toggle","des":"Sunrise next to the Domino Sugars plant in Baltimore. ","title":"Domino Sugars Planet Day/Night Image Toggle","photo":"/static/media/1200.d05bc9cf91f93c6510fc.jpg"},{"name":"downs-park-pier","des":"No two mornings are identical. As an aside, if you look closely in the first photo you\'ll see a couple out on the pier - they were getting their engagement photos taken.","title":"Downs Park Pier Sunrise","photo":"/static/media/1200.beb9ce6a34e7dadadad7.jpg"},{"name":"downs-park-pier-foggy","des":"Taken a week or so before Halloween.","title":"A Haunting View of Downs Park Pier","photo":"/static/media/1200.0ee1bb8bc6eb286a5f2a.jpg"},{"name":"the-thunderbirds","des":"The Thunderbirds. This shot was my most viewed shot on my old photography website.","title":"The Thunderbirds","photo":"/static/media/1200.20bd6b44c3ff33ac02a7.jpg"},{"name":"fort-armistead-sunrise-1","des":"I ruined my shoes for this shot. After I set up my camera on the banks of this inlet I realized I was slowly sinking into the mud. However, the most spectacular sunrise I\'d ever seen was in front of me so I didn\'t want to move. When the colors had finally faded I was in over my ankles. My shoes actually came off as I tried to escape. I would later vigorously wash them, but they were never the same.","title":"Fort Armistead Sunrise","photo":"/static/media/1200.f795645aa53dee5346af.jpg"},{"name":"something-in-the-mist","des":"Normally this abandoned pier is a huge eyesore, something that spoils the landscape of the area, however, on a morning so foggy that the other side of the harbor wasn\'t visible it jumped out at me. Almost like an abandoned island floating in the middle of nowhere.","title":"Something in the Mist - Abandoned Pier in Baltimore","photo":"/static/media/1200.35f2688e0392a4d31808.jpg"},{"name":"mossbrae-falls","des":"Getting to this place was an adventure in and of itself. There\'s no direct trail and I had to wade through a waist-deep section of the Sacramento River. However, the resulting sight was awe inspiring. The water looks like it\'s coming out of the underbrush on the mountain, and the falls run along the river. I know this sounds silly, but the place feels magical.Also, as a neat bit of trivia, Arnold Schwarzenegger took President George H.W. Bush here when he was showing off California to the former president.","title":"Mossbrae Falls","photo":"/static/media/1200.f8b4e48b082eb9b7d077.jpg"},{"name":"middle-branch-pier","des":"I think most people look at this shot and just kind of shrug, thinking of it as just another sunrise pier photo. But I spent over a year trying to get this shot. When I came across this pier I could tell there was a nice photo just waiting to be captured. All that was needed was a morning with little to no wind (so the water would be smooth) and a nice sunrise. However, after showing up a few times over the course of a few months, I realized that since the pier pointed north (meaning the sun rose off camera to the right), it would take an epic sunrise/sunset that lit up the whole sky to create the shot I had in mind.I spent several months trying to figure out when the best day would be. Over a dozen times I woke up early and drove down to the park, only to be rewarded with a very \"meh\" shot. Finally one night there was a storm and I was sure a great sunrise was waiting on the other side of it. When I got to the park the following morning I saw the sight you see in the second picture (when you click the toggle button). It was a dreary, unpleasant sight and there was trash everywhere. I was defeated. Why was I punishing myself like this? There\'s no shot here, and even if there was, no one cares about this park, everyone\'s always leaving their trash everywhere. I went home and tried to forget about this place.Almost exactly a year later I awoke from my sleep thinking about this shot. It was still dark outside and I figured since I hadn\'t been there in a while so I might as well give it one more try. When I got to the park I was met with the view you saw in the first image. It was completely unreal.Now, to be clear, I don\'t think I was divinely woken up to go take this photo, but it\'s one of those weird coincidences that sticks in the mind. There\'s also probably a moral in here about not giving up and being open to giving something another chance, or maybe even just listening to your gut. My first instincts were correct, a nice shot was possible, the place just needed the right lighting (and also for the area to be cleaned up, which some good people must have done).","title":"Middle Branch Pier - The difference a year makes","photo":"/static/media/1200.4ef285274d9478697b12.jpg"},{"name":"domino-sugars-sunrise","des":"Domino Sugars... how did I never notice the \"s\" at the end of sugars...","title":"Sunrise Behind the Domino Sugars Planet in Baltimore","photo":"/static/media/1200.ec428a3112e803abf86e.jpg"},{"name":"promenade-view-1","des":"A view from along Baltimore\'s Inner Harbor promenade.","title":"Sunrise Along Baltimore\'s Promenade","photo":"/static/media/1200.f9caf7c381e961f35bf9.jpg"},{"name":"broening-park-1","des":"A view from Broening Park in Baltimore.","title":"Sunrise at Broening Park in Baltimore","photo":"/static/media/1200.69bbd02ebadab4547e1f.jpg"},{"name":"fells-point-sunrise","des":"I was up early one morning exploring Fells Point when I saw the clouds start to change color. I followed the promenade until I came upon this spot.","title":"Sunrise at Fells Point in Baltimore","photo":"/static/media/1200.5f322839ef35e7577453.jpg"},{"name":"icy-domino-sugars-factory","des":"The thing I remember most about this shot was how incredibly cold it was. My hands were numb and my beard had ice in it. However, I really wanted to get a shot where there was snow around the building, since it would make the building look like it was spilling out sugar.","title":"An Icy Morning at the Domino Sugars Plant","photo":"/static/media/1200.5ac5789b6dc0ba39f49f.jpg"},{"name":"federal-hill-view-1","des":"A pre-dawn view from Federal Hill.","title":"Sunrise at Federal Hill Park in Baltimore","photo":"/static/media/1200.e1f433051db7e33e8f98.jpg"},{"name":"inner-harbor-sunrise","des":"Colors and shapes from Baltimore\'s Inner Harbor.","title":"Sunrise at Baltimore\'s Inner Harbor","photo":"/static/media/1200.7ed18026b7a693e96686.jpg"},{"name":"fells-point-puddle","des":"Fells Point Puddle","title":"Sunrise from the Fells Puddle in Baltimore","photo":"/static/media/1200.d042c5a5ff316a8066ea.jpg"},{"name":"middle-branch-boat-ramp","des":"Middle Branch Park Boat Ramp","title":"Baltimore Boat Ramp Sunrise","photo":"/static/media/1200.c0532b38b437110db823.jpg"},{"name":"baltimore-skyline-2016","des":"Baltimore City Skyline (2016)","title":"Baltimore City Skyline Sunset","photo":"/static/media/1200.a9a80d8829bff1ef7e69.jpg"},{"name":"jordan-lake","des":"The sun rising over Jordan Lake in North Calorina. I went down to Durham with my family for a long weekend and on the morning we were to return home I decided to sneak out early to catch the sun rise. I\'d seen this lake on the map and thought it might make for a nice spot. I had never been here before and neither had the person working the front desk at the hotel we were staying at, so I wasn\'t sure what to expect.I found this spot entirely by chance. I parked at some random spot along the road and just kind of walked until I came across a view that looked nice. The lake itself looked like a wonderful little area. It\'s a shame I didn\'t have more time to explore the area.","title":"Jordan Lake Sunrise","photo":"/static/media/1200.34541a7b5ba51131f3cb.jpg"},{"name":"fort-armistead-sunrise-2","des":"Fort Armistead Sunrise.","title":"Fort Armistead Sunrise - The Sun Aligns!","photo":"/static/media/1200.7f2f9abeca322fec17aa.jpg"},{"name":"cherry-blossoms-dc","des":"Sunrise at the Washington DC Cherry Blossoms.","title":"Cherry Blossoms Sunrise","photo":"/static/media/1200.c7189e1f4133d65ca0f4.jpg"},{"name":"mt-vernon-fountain","des":"Baltimore in Spring.","title":"Mt Vernon Fountain in Baltimore","photo":"/static/media/1200.dacb217714c2e2a6b9d6.jpg"},{"name":"a-pathway-to-nightmares","des":"I want to title this \"A Pathway to Nightmares\" because its a landscape that seems like its out of a nightmare.\n       However, in reality this pathway leads to a really nice playground so that seems a bit silly. However, I love\n       the creepiness of this image.","title":"A Pathway to Nightmares","photo":"/static/media/1200.923203303af91d09cae6.jpg"},{"name":"34th-street-1","des":"Every year in December the people who live on this street, 34th Street, go all out with decorating their houses.","title":"Baltimore\'s 34th Street at Christmas Time","photo":"/static/media/1200.95aa28d61585b66b891f.jpg"},{"name":"george-peabody-library","des":"There\'s a great short story titled \"The Library of Babel\", which is about a library that contains all possible 410-page books. Most of these books are just gibberish, but within the library every single human thought, story, and idea is captured. In fact, within the library there must exist a book which is a perfect index of the library\'s contents (and also many which are fake indexes). The librarians who inhabit the place are in a state of despair, and many seek to purify the library by destroying the books which are gibbish. Anyway, whenever I think of that story, I think of this place, the George Peabody Library in Baltimore.","title":"George Peabody Library in Baltimore","photo":"/static/media/1200.4bf0f820d09d112a991a.jpg"},{"name":"foggy-carroll-park","des":"I had originally planned to shoot the sunrise over Druid Lake in Baltimore, but when I arrived I found that the\n       city was in the midst of doing a big construction project and there was a fence around the lake. \n       Distraught, I decided to go home.As I made my way through unfamiliar backstreets a fog came over the city and I thought the skyline looked\n       really surreal as it faded into the haze. I pulled into the park next to me and ran to the highest spot I could\n       find. From there I took this picture.","title":"A Foggy Morning in Carroll Park","photo":"/static/media/1200.47ae0277acbe207f3c45.jpg"},{"name":"kids","des":"Kids.","title":"Smiling Kids","photo":"/static/media/1200.ddb38642c0a0d4fc181f.jpg"},{"name":"annapolis-rock-1","des":"Western Maryland.","title":"Annapolis Rock Overlook","photo":"/static/media/1200.c5784ed08aa682ad2db9.jpg"},{"name":"the-haunted-car","des":"I was taken to this spot by an Urbex YouTuber I used to follow. He\'d done a video on the car and\n       when I asked him where it was he offered to take me out to see it. I thought that was pretty cool of him,\n       though I felt a little strange going deep into the woods with someone I didn\'t know.The hike to the car took around an hour and I was really happy with the images I was able to capture. \n      To me the first one has a strange beauty to it and the second one I just find hilariously fun.","title":"The Haunted Car","photo":"/static/media/1200.8684807114bd645b9aa8.jpg"},{"name":"baltimore-skyline-2016-pano","des":"Baltimore Skyline 2016. This was taken from my in-law\'s condo. To get the 180+ degree view I took 3 shots from\n       each of their two balconies and then stitched the images together in Photoshop.The dynamic range for this shot was insane. I had tried to do it a few times previously\n       but I always ended up with the sky being blown out on one side. I finally got an evening where it worked out.","title":"Baltimore Skyline Panorama","photo":"/static/media/1200.7c2c8acfd760922aedbc.jpg"},{"name":"middle-branch-park-2019-pano","des":"This majestic view was once home to an auto junkyard. Thankfully someone had some sense and it\'s now the view\n      from a public park.","title":"Baltimore Sunrise Panorama","photo":"/static/media/1200.c8e8d3b64f18675ff825.jpg"},{"name":"mccloud-church-down-the-street","des":"","title":"McCloud Church","photo":"/static/media/1200.a62364438f831e5fe49c.jpg"},{"name":"mccloud-church-witching-hour","des":"","title":"The Witching Hour in McCloud","photo":"/static/media/1200.b865432acf8ebd8b9a73.jpg"},{"name":"mccloud-illuminated","des":"","title":"McCloud House","photo":"/static/media/1200.f0e615be8e752c3edf24.jpg"},{"name":"mccloud-pocket-of-light","des":"","title":"","photo":"/static/media/1200.ed295cb477115fd57258.jpg"},{"name":"mccloud-light-at-the-end-of-the-road","des":"","title":"Light at the End of the Road","photo":"/static/media/1200.125412103acb58a4a85a.jpg"},{"name":"mccloud-lonely-road","des":"","title":"A Lonely Road","photo":"/static/media/1200.82b5c5c4b5b33b4364d6.jpg"},{"name":"mccloud-playground","des":"","title":"McCloud Playground","photo":"/static/media/1200.372ad7909ce03c6778c5.jpg"},{"name":"mccloud-the-book","des":"","title":"McCloud Book Statue","photo":"/static/media/1200.3694b0ca1224b5c4ffed.jpg"},{"name":"mccloud-the-house","des":"","title":"An Uprooted House","photo":"/static/media/1200.ab07e4bcdad4f85d97d6.jpg"},{"name":"mccloud-gas-station","des":"","title":"McCloud Gas Station","photo":"/static/media/1200.4019b4a4764320241bd5.jpg"},{"name":"mccloud-at-night","des":"","title":"McCloud House","photo":"/static/media/1200.169d33573064678ce256.jpg"},{"name":"mccloud-high-school","des":"","title":"McCloud High School","photo":"/static/media/1200.28605f5f9bb0be4d0928.jpg"},{"name":"middle-branch-trailhead-no9-pano","des":"A panorama from Middle Branch Park in Baltimore.","title":"Baltimore Sunrise Panorama from Trailhead #9","photo":"/static/media/1200.ea610a780b1fcc2cc50a.jpg"},{"name":"heart-lake-smoky","des":"A creepy morning at Heart Lake.","title":"Mt Shasta from Heart Lake","photo":"/static/media/1200.f566045c7c85df018f3d.jpg"},{"name":"old-american-brewery","des":"The Old American Brewery looms over a row of townhouses. This is a strange yet iconic spot in Baltimore.\n      Photographers can make the brewery smaller or larger by adjusting the focal length of their lens. I\'d only ever\n      seen daylight shots of this place so I thought it might be cool to stop by after dark.Wow did I not think that through.\n      The area turned out to be pretty sketchy and it\'s one of the few times I\'ve felt unsafe taking a photo. \n      Although it\'s a cool spot, I\'m not sure I see myself returning.","title":"Old American Brewery in Baltimore","photo":"/static/media/1200.651c4c3ed4863e92a9ee.jpg"},{"name":"halloween-house-1","des":"I love it when someone goes all out for Halloween. In 2021 I drove around with my daughter looking for\n      \"Halloween Houses\". We only found a few, but the ones we did find were amazing. \n      If I collect up enough I may make a gallery dedicated to them.\n      These kind of displays need more love.","title":"Halloween House in Glenn Bernie","photo":"/static/media/1200.ec8df38d7d4101685c8e.jpg"},{"name":"baltimore-skyline-2022-pano","des":"A panorama from the Inner Harbor in Baltimore.","title":"Baltimore Skyline Panorama","photo":"/static/media/1200.a821bee87e2338ed15cb.jpg"},{"name":"fells-point-2020-pano","des":"A panorama from Fells Point in Baltimore.","title":"Baltimore Fells Point Sunrise Panorama","photo":"/static/media/1200.8ef0801b9027d3124ff4.jpg"}]');
    $galleries = json_decode('[{"name":"main-standard","title":"Main","photoName":"patterson-park-pagoda-in-springtime","description":"The photographic portfolio of Patrick Gillespie."},{"name":"main-spring","title":"Main","photoName":"patterson-park-pagoda-in-springtime","description":"The photographic portfolio of Patrick Gillespie."},{"name":"main-summer","title":"Main","photoName":"patterson-park-pagoda-in-springtime","description":"The photographic portfolio of Patrick Gillespie."},{"name":"main-halloween","title":"Main","photoName":"halloween-houses","description":"The photographic portfolio of Patrick Gillespie."},{"name":"main-christmas","title":"Main","photoName":"34th-street-1","description":"The photographic portfolio of Patrick Gillespie."},{"name":"misc","title":"Misc","photoName":"mt-vernon-fountain","description":"The photographic portfolio of Patrick Gillespie."},{"name":"sunrises-and-sunsets","title":"Sunrises/Sunsets","photoName":"fort-armistead-sunrise-1","description":"The photographic portfolio of Patrick Gillespie."},{"name":"interactive","title":"Interactive","photoName":"baltimore-skyline-light-toggle","description":"A gallery of interactive photographic images."},{"name":"spooky","title":"Spooky","photoName":"a-pathway-to-nightmares","description":"Some spooky images."},{"name":"mccloud-at-night","title":"McCloud at Night","photoName":"mccloud-church-down-the-street","description":"A photographic essay on the town of McCloud, CA."},{"name":"halloween-houses","title":"Halloween Houses","photoName":"halloween-death-plague-dance-party","description":"A gallery of houses that went all-out for Halloween"},{"name":"panoramas","title":"Panoramas","photoName":"baltimore-skyline-2016-pano","description":"A set of panoramas from the Baltimore area."}]');

    $pagecontents = file_get_contents(__DIR__ . "/index.html");

    // defaults
    $ogTitle = 'Patrick Gillespie Photography';
    $ogDescription = 'The photographic portfolio of Patrick Gillespie.';
    $ogImage = '';

    $theUrl = $_SERVER['REQUEST_URI'];
    $theUrl = rtrim($theUrl, '/');

    preg_match('/[^\/]*$/', $theUrl, $endUriPiece);
    preg_match('/^\/[^\/]*/', $theUrl, $startUriPiece);

    $endPiece = '';
    if ($endUriPiece !== NULL) {
        $endPiece = $endUriPiece[0];
    }

    $startPiece = '';
    if ($startUriPiece !== NULL) {
        $startPiece = $startUriPiece[0];
    }

    if (strcmp($startPiece, '/about') === 0) {
        $ogTitle = "About Patrick";
        $ogDescription = "My name is Pat, I'm a software developer and amateur photographer. I setup this site to show off some of my favorite photos.";
        $ogImage = '/static/media/1200.170224a5d7e793275157.jpg';
    }

    if (strcmp($startPiece, '/photo') === 0) {
        foreach($photos as $photo) {
            if (strcmp($photo->name, $endPiece) === 0) {
                $ogTitle = $photo->title;
                $ogDescription = $photo->des;
                $ogImage = $photo->photo;
            }
        }
    }

    if (strcmp($startPiece, '/gallery') === 0) {
        foreach($galleries as $gallery) {
            if (strcmp($gallery->name, $endPiece) === 0) {
                $ogTitle = $gallery->title;
                $ogDescription = $gallery->description;
                $photoName = $gallery->photoName;

                foreach($photos as $photo) {
                    if (strcmp($photo->name, $photoName) === 0) {
                        $ogImage = $photo->photo;
                    }
                }
            }
        }
    }

    $pagecontents = str_replace("__TITLE__", $ogTitle, $pagecontents);
    $pagecontents = str_replace("__DESCRIPTION__", $ogDescription, $pagecontents);
    $pagecontents = str_replace("__OG_TITLE__", $ogTitle, $pagecontents);
    $pagecontents = str_replace("__OG_DESCRIPTION__", $ogDescription, $pagecontents);
    $pagecontents = str_replace("__OG_IMAGE__", $ogImage, $pagecontents);

    echo $pagecontents;
?>
